MODULE RepricingDashboardBatch;

REQUIRE RepricingDashboard, RepricingPriceListBatch;

NAMESPACE Repricing;
EXTEND FORM repricingDashboard
    OBJECTS bt=Batch
    PROPERTIES(bt)          inDashboardRepricing//, selectBatch
    PROPERTIES(bt) READONLY idBarcodeSku, idSku, nameSku, shortNameUOM
    PROPERTIES     READONLY dateTime(bt), seriesNumber(bt), nameSupplier(bt), currentBalance(bt,d), managementRetailPrice(bt), retailPricingPriceB(bt,d,t) 
    PROPERTIES (d,o,t)  TODRAW bt TOOLBAR calculateDashboardManagementRepricingBatch, createDashboardRepricingBatch
                                              
//    PROPERTIES() READONLY countSelectBatchs SHOWIF countSelectBatchs() TODRAW bt                                          
    FILTERS inDashboardRepricing(bt), isParent(sg, sku(bt)) 
;
DESIGN repricingDashboard {
    skuBox {
        type = SPLITH;
        fill = 1;
        MOVE skuTree.tree.box { caption = 'Группы SKU'; fill=0.5; }
        NEW detail {
            fill = 1;
            type = TABBED;
            MOVE sk.box {
                caption = 'Товары, для которых необходима переоценка';
                PROPERTY(retailPricingPriceB(sk,d,t)) {
                    caption = 'Цена (текущая)';
                }
            }
            MOVE bt.box {
                caption = 'Партии, для которых необходима переоценка';
                PROPERTY(retailPricingPriceB(bt,d,t)) {
                    caption = 'Цена (текущая)';
                }
            }            
        }
    }
}