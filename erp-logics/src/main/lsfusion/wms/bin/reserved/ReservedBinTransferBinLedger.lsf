MODULE ReservedBinTransferBinLedger;

REQUIRE ReservedBinLedger, BinTransferBinLedger;

NAMESPACE Bin;

@implementReservedBinLedger(BinTransfer, sku, dateTime, stock, outBin);

quantity[ReservedBinLedger](BinTransferDetail ledger) += -quantity(ledger);

CONSTRAINT CHANGED(outBin(UserBinTransferDetail detail)) AND NOT prevAvailableQuantity(sku(detail), outBin(detail))
    CHECKED BY outBin[BinTransferDetail]
    MESSAGE 'Нет доступного кол-ва товара в ячейке';