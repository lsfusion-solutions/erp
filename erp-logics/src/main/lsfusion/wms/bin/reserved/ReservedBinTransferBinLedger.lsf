MODULE ReservedBinTransferBinLedger;

REQUIRE ReservedBinLedger, BinTransferBinLedger;

NAMESPACE Bin;

@implementReservedBinLedger(BinTransfer, sku, dateTime, stock, outBin);

quantity[ReservedBinLedger](BinTransferDetail ledger) += -quantity(ledger);

CONSTRAINT SETCHANGED(outBin(UserBinTransferDetail detail)) AND NOT prevAvailableQuantity(sku(detail), outBin(detail)) AND detail IS UserBinTransferDetail
    CHECKED BY outBin[UserBinTransferDetail]
    MESSAGE 'Нет доступного кол-ва товара в ячейке';