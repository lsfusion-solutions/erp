MODULE ReservedBinOrderBinLedger;

REQUIRE ReservedBinLedger, BinOrderBinLedger;

NAMESPACE Bin;

@implementReservedBinLedger(BinOrder, sku, dateTime, stock, outBin);

quantity[ReservedBinLedger](BinOrderDetail ledger) += quantity(ledger);

CONSTRAINT CHANGED(outBin(BinOrderDetail detail)) AND NOT prevAvailableQuantity(sku(detail), outBin(detail)) 
    CHECKED BY outBin[UserBinOrderDetail]
    MESSAGE 'Нет доступного кол-ва товара в ячейке';