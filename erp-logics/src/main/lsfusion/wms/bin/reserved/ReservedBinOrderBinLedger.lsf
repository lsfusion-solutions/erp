MODULE ReservedBinOrderBinLedger;

REQUIRE ReservedBinLedger, BinOrderBinLedger;

NAMESPACE Bin;

@implementReservedBinLedger(BinOrder, sku, dateTime, stock, outBin);

quantity[ReservedBinLedger](BinOrderDetail ledger) += quantity(ledger);

CONSTRAINT CHANGED(outBin(UserBinOrderDetail detail)) AND NOT prevAvailableQuantity(sku(detail), outBin(detail)) AND detail IS UserBinOrderDetail
    CHECKED BY outBin[UserBinOrderDetail]
    MESSAGE 'Нет доступного кол-ва товара в ячейке';