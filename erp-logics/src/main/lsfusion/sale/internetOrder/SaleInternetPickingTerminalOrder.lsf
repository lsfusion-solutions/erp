MODULE SaleInternetPickingTerminalOrder;

REQUIRE SaleInternetPicking, TerminalOrder;

NAMESPACE Sale;

EXTEND CLASS Picking : TerminalOrder;
EXTEND CLASS InternetOrderDetail : TerminalOrderDetail;

date[TerminalOrder] (Picking o) += date(o);
dataNumber[TerminalOrder] (Picking o) += number(o);
isOpened[TerminalOrder] (Picking o) += TRUE IF o IS Picking;
idSupplier[TerminalOrder] (Picking o) += id(stock(o));
user(TerminalOrder d) += executor(d); 

//filter(Picking o, Stock s) += (o IS Picking AND stock(o) == s);

order[TerminalOrderDetail] (InternetOrderDetail d) += picking(d);

sku[TerminalOrderDetail] (InternetOrderDetail d) += sku(d);

price[TerminalOrderDetail] (InternetOrderDetail d) += price(d);
dataOrderQuantity[TerminalOrderDetail] (InternetOrderDetail d) += quantity(d);

useTerminalOrderDetailVop 'Использовать VOP 15 для комплектаций ИМ' = DATA BOOLEAN ();
vop(TerminalOrderDetail d) += WHEN d IS InternetOrderDetail AND useTerminalOrderDetailVop() THEN '15';

EXTEND FORM options
    PROPERTIES useTerminalOrderDetailVop()
;

DESIGN options {
    internetOrder{
        MOVE PROPERTY(useTerminalOrderDetailVop());
    }
}