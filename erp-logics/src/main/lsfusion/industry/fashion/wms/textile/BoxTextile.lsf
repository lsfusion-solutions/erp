MODULE BoxTextile;

REQUIRE Box, ItemFashionTextile;

PRIORITY Item;

NAMESPACE Box;


article = DATA Article(Box) NONULL;
idArticle 'Модель' (Box b) = id(article(b));
captionArticle 'Название' (Box b) = caption(article(b));

quantity 'Кол-во изделий, шт' = DATA INTEGER (Box, Size);
quantity 'Кол-во изделий, шт' = GROUP SUM quantity(Box b, Size sz) BY b;

EXTEND FORM box
    PROPERTIES(s) idArticle, captionArticle
    
    OBJECTS sz = Size
    PROPERTIES name(sz) READONLY, quantity(s, sz)
    ORDERS name(sz)
    
    FILTERGROUP in FILTER 'С количеством' quantity(s,sz) DEFAULT
;

EXTEND FORM boxes
    PROPERTIES(s) READONLY idArticle, captionArticle, quantity 

    OBJECTS sz = Size
    PROPERTIES READONLY name(sz), quantity(s, sz)
    ORDERS name(sz)
    FILTERS quantity(s,sz)
;

