MODULE LabelDirectPrintLotTextile;

REQUIRE LabelDirectPrintTextile, Lot;

NAMESPACE Label;

stickerTransaction = DATA StickerTransaction(Lot);
printed 'Напечатана' (Lot l) = stickerTransaction(l) AND NOT skipReports(stickerTransaction(l)) MATERIALIZED;
notPrinted (Lot l) = l IS Lot AND NOT printed(l) MATERIALIZED INDEXED;

countNotPrintedLot 'Кол-во ненапечатанных марок' = GROUP SUM 1 IF notPrinted(Lot l) BY sku(l) MATERIALIZED;

EXTEND FORM lots
    PROPERTIES(l) READONLY printed AFTER nameSku(l)
;

@defineOption(testDatamatrix, 'Тестовый datamatrix для печати', STRING, items);

@defineOption(printTestDatamartix, 'Печатать тестовый datamatrix', STRING, items);