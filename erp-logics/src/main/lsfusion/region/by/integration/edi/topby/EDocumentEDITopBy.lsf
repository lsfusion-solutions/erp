MODULE EDocumentEDITopBy;

REQUIRE EDocumentEDITopByProtocol, EDocumentEDSTopBy;

signAndSendSender(EDocument d) + {
    IF EDIProviderInvoice(legalEntity(receiver(d))) == EDIProvider.topBy THEN
        IF exportedSender(d) THEN MESSAGE 'Документ (отправитель) уже отправлен';
            signAndSendSenderEDocument(d, loginTopBy(sender(d)), passwordTopBy(sender(d)), ('http://' + hostTopBy(sender(d)) +':' + portTopBy(sender(d)) + '/DmcService'), outputDirTopBy(), 'TopBy');
}