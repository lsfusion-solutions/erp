MODULE GISMTSaleShipment;

REQUIRE GISMTDocument, GISMTLegalEntity, SaleShipmentLot, GISMTShipment;

PRIORITY GISMT, Sale;

NAMESPACE GISMTSale;

@defineDocumentGISMTOut(supplier, customer);

//skipGetDocumentStatuses (LotType t) += TRUE IF NOT (GROUP SUM 1 IF lotType(InvoiceDocument d)==t); 
necessarilyAction 'Обязательные причины выбытия'(InvoiceDetail d) = actionReceipt(operation(d)) == 'DISTANCE'  OR actionReceipt(operation(d)) == 'RETAIL'
    OR actionReceipt(operation(d)) == 'BY_SAMPLES' OR actionReceipt(operation(d)) == 'VENDING' OR actionReceipt(operation(d)) == 'PACKING';

productCost(InvoiceDetail d) += invoicePrice(d) IF necessarilyAction(d);