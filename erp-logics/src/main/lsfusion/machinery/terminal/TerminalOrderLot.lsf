MODULE TerminalOrderLot;

REQUIRE TerminalOrder, LotAggregate;

NAMESPACE Terminal;

quantity = ABSTRACT NUMERIC[16,5] (TerminalOrderDetail, Lot);

terminalOrderDetail (Lot l, Stock s, Employee e) = GROUP MAX TerminalOrderDetail d IF filterTerminal(order(d), d, s, e) AND quantity(d, l);

quantityTerminalOrder (Lot l, Stock s, Employee e) = quantity(terminalOrderDetail(l, s, e), l);

terminalOrder (Lot l, Stock s, Employee e) = order(terminalOrderDetail(l, s, e));
numberTerminalOrder (Lot l, Stock s, Employee e) = number(terminalOrder(l, s, e));