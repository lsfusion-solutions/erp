MODULE PurchaseReturnInvoiceGestori;

REQUIRE PurchaseReturnInvoice, PurchaseInvoiceVATRu;

NAMESPACE PurchaseReturn;

WHEN LOCAL FORMS userInvoice CHANGED(invoiceDetail(UserInvoiceDetail d)) AND sku(d)  DO {
        valueVAT(d) <- valueVAT(invoiceDetail(d));
}

overCalcInvoiceSum (Purchase.UserInvoiceDetail d) += NUMERIC[18,4](invoicePrice(d) * quantity(d)) IF withVATPrice(d);

overCopy(Purchase.UserInvoiceDetail d, Purchase.UserInvoiceDetail detail) + {
        VAT(d) <- VAT(detail);
}
